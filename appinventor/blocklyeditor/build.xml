<?xml version="1.0"?>

<!-- ======================================================================
     Copyright 2011 Google Inc.  All Rights Reserved.
     Author: kerr@google.com (Debby Wallach)

     Blocks library

     In order to ensure that the blocks editor can run on Java 5, we compile
     with ai.javac5 and we do not depend on any jars that are not compiled
     with ai.javac5.
     ====================================================================== -->

<project name="blocklyeditor" default="all">
  <description>
    In-browser blocks editor for App Inventor based on Blockly
  </description>

  <target name="all"
          depends="BlocklyCompile">
  </target>

  <!-- =====================================================================
       Import common directory, task, and target definitions.
       ===================================================================== -->
  <import file="../build-common.xml" />

  <target name="BlocklyCompile"
          description="For now, compiling Blockly means cat-ing its javascript together">
    <echo message="Going to concat javascript files to ${public.build.dir}/blockly-all.js"/>
    <!-- blockly.js has to come first -->
    <concat destfile="${public.build.dir}/blockly-all.js">
      <fileset file="${src.dir}/blockly.js"/>
    </concat>
    <!-- the rest of the .js files can come in any order -->
    <concat destfile="${public.build.dir}/blockly-all.js"
            append="true">
      <fileset dir="${src.dir}">
        <include name="*.js"/>
        <exclude name="blockly.js"/>
        <include name="language/language_*.js"/>
      </fileset>
    </concat>
  </target>
</project>
